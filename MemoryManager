/**
 * 
 */

/**
 * 
 */
public class MemoryManager {
    
    private byte[] memoryPool;
    private FreeBlockList freeBlockList;
    
    // Constructor. poolsize defines the size of the memory pool in bytes
    public MemoryManager(int poolSize) {
        
        this.memoryPool = new byte[poolSize];
        this.freeBlockList = new FreeBlockList(poolSize);
    }
    
    // Insert a record and return its position handle.
    // space contains the record to be inserted, of length size.
    public Handle insert(byte[] space, int size) {
        
        //get handle &
        //remove the space from the freeBlockList
        Handle member = freeBlockList.allocateBlock(size);
        
        //add the byte version of the size in the memoryPool
        memoryPool[member.getStart()] = (byte)size;
       
        //return the handle (to the database)
        return member;

    }
    
    // Return the length of the record associated with theHandle
    public int length(Handle theHandle) {
        
        //call the getLength method from the handle
        return theHandle.getLength();
        
    }
    
    // Free a block at the position specified by theHandle.
    // Merge adjacent free blocks.
    public void remove(Handle theHandle) {
        
        //remove the byte from the byteArray
       
        
        //add a block of appropriate size to FBL
        freeBlockList.releaseBlock(theHandle);
        
        //merge free blokcs
        freeBlockList.mergeFreeBlocks();
    }
    
    // Return the record with handle posHandle, up to size bytes, by
    // copying it into space.
    // Return the number of bytes actually copied into space.
    public int get(byte[] space, Handle theHandle, int size) {
        
        //get the index for space from the handle
        int pos = theHandle.getStart();
        
        //grab the byte stored in the index of space
        byte bite = space[pos];
        
        //return the integer value of the byte
        return (int) bite;
        
    }
    
    // Dump a printout of the freeblock list
    public void dump() {
        
    }
    

    
    
  

}
